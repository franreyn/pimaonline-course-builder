<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>GrapesJS Example</title>
    <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
    <script src="https://unpkg.com/grapesjs"></script>
  </head>
  <body>
    <div id="gjs"></div>
    <button id="add-blocks">Add Custom Blocks</button>
    <button id="export">Export HTML</button>
    <script type="text/javascript">
      var editor = grapesjs.init({
        container: '#gjs',
        fromElement: true,
        storageManager: false,
        plugins: [
          'gjs-blocks-basic',
          'gjs-preset-webpage'
        ],
        canvas: {
          styles: [
            'https://unpkg.com/grapesjs/dist/css/grapes.min.css',
            'https://unpkg.com/grapesjs-preset-webpage/dist/grapesjs-preset-webpage.min.css'
          ]
        }
      });

      // Add the custom blocks to the block manager
      document.getElementById('add-blocks').addEventListener('click', function() {
        editor.BlockManager.add('my-text-block', {
          label: 'Text',
          content: '<div class="my-text-block">Enter your text here</div>',
          category: 'Basic',
          attributes: {
            class: 'fa fa-font'
          }
        });

        editor.BlockManager.add('my-image-block', {
          label: 'Image',
          content: '<div class="my-image-block"><img src="https://source.unsplash.com/random/400x400"></div>',
          category: 'Basic',
          attributes: {
            class: 'fa fa-picture-o'
          }
        });
      });

      // Export the HTML
      document.getElementById('export').addEventListener('click', function() {
        var htmlCode = editor.getHtml();
        var cssCode = editor.getCss();
        console.log(htmlCode, cssCode);
      });
    </script>
  </body>
</html>

<!-- 

Save without skipping dialogue. Work universally. Saving here just in case the 

    let currentFileName = null;

    function saveToLocal(editor, saveAs = false) {
      const json = JSON.stringify(editor.getComponents());
      const blob = new Blob([json], { type: "application/json;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = saveAs || !currentFileName ? "grapesjs-layout.json" : currentFileName;
      link.click();
      currentFileName = link.download;
      setTimeout(() => URL.revokeObjectURL(url), 0);
    }

    function openFromLocal(editor) {
      const input = document.createElement("input");
      input.type = "file";
      input.accept = ".json";
      input.onchange = (event) => {
        const file = event.target.files[0];
        if (file) {
          currentFileName = file.name;
          const reader = new FileReader();
          reader.onload = (e) => {
            const json = e.target.result;
            try {
              const components = JSON.parse(json);
              editor.setComponents(components);
            } catch (error) {
              alert("Invalid file format.");
            }
          };
          reader.readAsText(file);
        }
      };
      input.click();
    }

    // Sample usage
    const btnSave = document.getElementById("btn-save");
    btnSave.addEventListener("click", () => saveToLocal(editor, false));

    const btnSaveAs = document.getElementById("btn-save-as");
    btnSaveAs.addEventListener("click", () => saveToLocal(editor, true));

    const btnOpen = document.getElementById("btn-open");
    btnOpen.addEventListener("click", () => openFromLocal(editor));


 -->